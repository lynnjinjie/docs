(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{522:function(s,t,a){"use strict";a.r(t);var n=a(26),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),a("ul",[a("li",[s._v("一个树莓派(4B,4GB 内存)")]),s._v(" "),a("li",[s._v("一张 TF 卡,作为系统盘")]),s._v(" "),a("li",[s._v("一台电脑,用来烧录系统")])]),s._v(" "),a("h2",{attrs:{id:"系统选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统选择"}},[s._v("#")]),s._v(" 系统选择")]),s._v(" "),a("p",[s._v("树莓派的系统选择有很多, 本着坑比较少,安装时能够更快找到解决办法的想法,安装了[官方]的系统(https://www.raspberrypi.org/downloads/raspberry-pi-os/)")]),s._v(" "),a("p",[s._v("官方的系统有 3 种选择:")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("有桌面和推荐软件的")])]),s._v(" "),a("li",[a("p",[s._v("桌面的")])]),s._v(" "),a("li",[a("p",[s._v("只有 CLI 的")])])]),s._v(" "),a("p",[s._v("本次安装的是第 3 种")]),s._v(" "),a("h2",{attrs:{id:"烧录系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#烧录系统"}},[s._v("#")]),s._v(" 烧录系统")]),s._v(" "),a("h3",{attrs:{id:"_1-下载系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载系统"}},[s._v("#")]),s._v(" 1. 下载系统")]),s._v(" "),a("p",[s._v("解压出 img,本次为 2020-08-20-raspios-buster-armhf-lite.img")]),s._v(" "),a("h3",{attrs:{id:"_2-写入-tf-卡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-写入-tf-卡"}},[s._v("#")]),s._v(" 2. 写入 TF 卡")]),s._v(" "),a("p",[s._v("window 上使用"),a("a",{attrs:{href:"https://win32diskimager.download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("win32 disk imager"),a("OutboundLink")],1),s._v(",mac 上使用"),a("a",{attrs:{href:"https://github.com/balena-io/etcher/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("Etcher"),a("OutboundLink")],1),s._v("写入到 TF 卡上")]),s._v(" "),a("h2",{attrs:{id:"ssh-连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-连接"}},[s._v("#")]),s._v(" ssh 连接")]),s._v(" "),a("h3",{attrs:{id:"_1-打开-tf-卡的-boot-目录-新建一个名为ssh的无类型文件-让树莓派开机启动-ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-打开-tf-卡的-boot-目录-新建一个名为ssh的无类型文件-让树莓派开机启动-ssh"}},[s._v("#")]),s._v(" 1. 打开 TF 卡的 boot 目录,新建一个名为"),a("code",[s._v("ssh")]),s._v("的无类型文件,让树莓派开机启动 ssh")]),s._v(" "),a("h3",{attrs:{id:"_2-新建名为wpa-supplicant-conf的文件-用编辑器打开-设置和电脑同一-wifi-的名称-密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-新建名为wpa-supplicant-conf的文件-用编辑器打开-设置和电脑同一-wifi-的名称-密码"}},[s._v("#")]),s._v(" 2. 新建名为"),a("code",[s._v("wpa_supplicant.conf")]),s._v("的文件,用编辑器打开,设置和电脑同一 wifi 的名称,密码")]),s._v(" "),a("div",{staticClass:"language-conf extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('  country=CN\n  ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\n  update_config=1\n\n  network={\n  ssid="网络名称，使用英语，保留引号"\n  psk="网络密码，保留引号"\n  priority=1\n  }\n')])])]),a("h3",{attrs:{id:"_3-把-tf-卡插入-打开电源启动树莓派-绿灯灭开机完成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-把-tf-卡插入-打开电源启动树莓派-绿灯灭开机完成"}},[s._v("#")]),s._v(" 3. 把 TF 卡插入,打开电源启动树莓派,绿灯灭开机完成")]),s._v(" "),a("h3",{attrs:{id:"_4-通过路由器-或通过命令arp-a查看局域网所以-ip-获取树莓派-ip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-通过路由器-或通过命令arp-a查看局域网所以-ip-获取树莓派-ip"}},[s._v("#")]),s._v(" 4. 通过路由器,或通过命令"),a("code",[s._v("arp -a")]),s._v("查看局域网所以 ip,获取树莓派 ip")]),s._v(" "),a("h3",{attrs:{id:"_5-通过终端-或使用putty这样的-ssh-客户端连接-本次使用终端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-通过终端-或使用putty这样的-ssh-客户端连接-本次使用终端"}},[s._v("#")]),s._v(" 5. 通过终端,或使用"),a("a",{attrs:{href:"https://www.putty.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("putty"),a("OutboundLink")],1),s._v("这样的 ssh 客户端连接,本次使用终端")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认用户名: pi 默认密码: raspberry")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" 用户名@树莓派ip\n")])])]),a("h2",{attrs:{id:"一般配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一般配置"}},[s._v("#")]),s._v(" 一般配置")]),s._v(" "),a("h3",{attrs:{id:"_1-通过sudo-raspi-config命令进行-密码-语言等设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-通过sudo-raspi-config命令进行-密码-语言等设置"}},[s._v("#")]),s._v(" 1. 通过"),a("code",[s._v("sudo raspi-config")]),s._v("命令进行,密码,语言等设置")]),s._v(" "),a("h3",{attrs:{id:"_2-开机自起-ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-开机自起-ssh"}},[s._v("#")]),s._v(" 2. 开机自起 ssh")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/rc.local\n  在"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("前面加入: /etc/init.d/ssh start\n")])])]),a("h3",{attrs:{id:"_3-设置国内镜像源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-设置国内镜像源"}},[s._v("#")]),s._v(" 3. 设置国内镜像源")]),s._v(" "),a("p",[s._v("使用"),a("a",{attrs:{href:"https://mirrors.tuna.tsinghua.edu.cn/help/raspbian/",target:"_blank",rel:"noopener noreferrer"}},[s._v("清华的源"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用vim编辑 `/etc/apt/sources.list` 文件，删除或加#注释原文件所有内容，用以下内容取代：")]),s._v("\n  deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi\n  deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用vim编辑 `/etc/apt/sources.list.d/raspi.list` 文件，删除或注释原文件所有内容，用以下内容取代：")]),s._v("\n  deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui\n\n  最后使用"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("更新软件源列表\n")])])]),a("h3",{attrs:{id:"_4-重装-vim"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-重装-vim"}},[s._v("#")]),s._v(" 4. 重装 vim")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于vi在编辑模式下,方向键会输出ABCD,这是vi-common的bug,需重新安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" remove vim-common\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\n")])])]),a("h3",{attrs:{id:"_5-安装-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装-nginx"}},[s._v("#")]),s._v(" 5. 安装 nginx")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置nginx")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/nginx/sites-enabled/default\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动nginx")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start nginx\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重载nginx")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl reload nginx\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在浏览器中输入树莓派ip,可访问nginx默认的index")]),s._v("\n")])])]),a("h3",{attrs:{id:"_6-安装-mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-安装-mysql"}},[s._v("#")]),s._v(" 6. 安装 mysql")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装mysql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" mariadb-server\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置开机启动")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mariadb\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看端口,默认3306")]),s._v("\nss -ntl\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入数据库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mysql -u root -p\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#选择数据库")]),s._v("\nuse mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置root密码")]),s._v("\nupdate user "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("plugin")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql_native_password'")]),s._v(" where "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nUPDATE user SET "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("password")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PASSWORD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'自己的密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" WHERE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置账号权限")]),s._v("\nGRANT ALL PRIVILEGES ON *.* TO "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root账号密码'")]),s._v(" WITH GRANT OPTION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#刷新")]),s._v("\nflush privileges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#退出mysql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置mysql配置,允许远程访问")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/mysql/mariadb.conf.d/50-server.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#bind-address设置为0.0.0.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加参数: skip-name-resolve")]),s._v("\nctrl^o + 回车 保存 ctrl^x 退出\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看mysql命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/mysql status/start/stop/restart\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启mysql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/mysql restart\n")])])]),a("h3",{attrs:{id:"安装-nodejs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-nodejs"}},[s._v("#")]),s._v(" 安装 nodejs")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动NodeSource存储库(setup_15.x设置最新LTS版)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://deb.nodesource.com/setup_15.x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装nodejs")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nodejs\n")])])]),a("h3",{attrs:{id:"_8-开启-root-权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-开启-root-权限"}},[s._v("#")]),s._v(" 8. 开启 root 权限")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置root用户密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启用root用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" --unlock root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置ssh允许登录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/^#PermitRootLogin.*/PermitRootLogin yes/g"')]),s._v(" /etc/ssh/sshd_config\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启ssh服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#为root用户应用于当前用户相同的bash配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ~/.bashrc /root/.bashrc\n\n通过 "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@树莓派ip"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 就可以使用root登录来\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);